<!DOCTYPE html> <html><head>
		<title>0. Enumerating possible privesc</title>
		<base href="..\..\..\..\..\..\..\../">
		<meta id="root-path" root-path="..\..\..\..\..\..\..\../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="Hacking - 0. Enumerating possible privesc">
		<meta property="og:title" content="0. Enumerating possible privesc">
		<meta property="og:description" content="Hacking - 0. Enumerating possible privesc">
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://dobliuw.com/notes/4.-cybersecurity/redteam/pentesting/systems/2.-audit-phases/3.-privilege-scalation/windows/0.-enumerating-possible-privesc.html">
		<meta property="og:image" content="undefined">
		<meta property="og:site_name" content="Hacking">
		<meta name="author" content="Dobliuw"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://dobliuw.com/lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="lib/scripts/pixi.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="lib/scripts/minisearch.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager theme-dark show-inline-title show-ribbon"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mn{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}mjx-c.mjx-c38::before{padding:.666em .5em .022em 0;content:"8"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}</style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="Privilege Scalation"><p dir="auto">Privilege Scalation</p></h1><div class="el-h1 heading-wrapper"><div class="heading-children"><div class="el-p"><p dir="auto">Como en todo proceso de Hacking a un determinado host, no importa cual sea su Sistema Operativo, la meta siempre será hacernos como dueños del mismo, de esta manera podremos tener el absoluto control y poder en el mismo. Pero esto no siempre es alcanzado tras la explotación, a lo mejor ingresamos al sistema por medio de una explotación web de un servicio IIS, en el caso de Windows, o Apache o Nginx, en el caso de OS basados en Linux, y no necesariamente vamos a ser usuarios Administradores o root, en cambio, vamos a haber obtenido acceso al sistema como el usuario que ejecuta la acción, es decir que muy probablemente seamos un usuario con bajos permisos o mismo una cuenta de servicio, al final.... pudimos haber obtenido acceso al sistema explotando una vulnerabilidad que nos permite obtener <a data-href="RCE - (Remote Command Execution)" href="notes/4.-cybersecurity/redteam/pentesting/systems/2.-audit-phases/2.-explotation/vulnerabilities/rce-(remote-command-execution).html" class="internal-link" target="_self" rel="noopener nofollow">RCE - (Remote Command Execution)</a> y cuando ejecutemos los comandos, estos serán ejecutados por el usuario que corra el servicio.</p></div><div class="el-p"><p dir="auto">La meta de la fase de <em>Privilege Escalation</em> es escalar los permisos o privilegios que tiene el usuario vulnerado, esto puede implicar convertirnos en el usuario <em>Administrator</em>,  pero también puede implicar convertirnos en otros usuarios del sistema que tengan mayor privilegios al usuario vulnerado en principio, si bien la meta es ser dueños del sistema, no necesariamente puede haber una vía directa del usuario vulnerado en principio al usuario con máximos privilegios, puede ser una suseción de escaladas de privilegios hasta lograr nuestro goal. </p></div><div class="el-hr"><hr></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="Basic System enumeration" dir="auto" class="heading" id="Basic_System_enumeration">Basic System enumeration</h1><div class="heading-children"><div class="el-h6 heading-wrapper"><h6 data-heading="System Enumeration" dir="auto" class="heading" id="System_Enumeration"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>System Enumeration</h6><div class="heading-children"><div class="el-p"><p dir="auto">Una vez en el sistema, llevar a cabo una enumeración del mismo es un proceso clave antes de tomar desiciones de realizar tareas más tediosas o de análisis profundo para búscar posibles vias de aumentar nuestro privilegio. Algunos de los comandos más básicos utilizados que nos pueden ayudar a detectar usuarios del sistema, arquitectura, version, nombre, redes, etc. del mismo son:</p></div><div class="el-pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded"><span class="token comment"># Print information about the config and properties of Local Machine</span>
&gt; systeminfo
<span class="token comment"># We could filter the stdout with findstr command</span>
&gt; systeminfo <span class="token punctuation">|</span> findstr <span class="token operator">/</span>B <span class="token operator">/</span>IC:<span class="token string">"os name"</span> <span class="token operator">/</span>IC:<span class="token string">"os version"</span> <span class="token operator">/</span>IC:<span class="token string">"system type"</span>
&gt; wmic os get Caption<span class="token punctuation">,</span> OSArchitecture<span class="token punctuation">,</span> Version
<span class="token comment"># Hostname </span>
&gt; hostname
<span class="token comment"># Use Windows Management Instrumentation for last patches</span>
&gt; wmic qfe
&gt; wmic qfe get Caption<span class="token punctuation">,</span> Description<span class="token punctuation">,</span> HotFixID<span class="token punctuation">,</span> InstalledOn
<span class="token comment"># </span>
&gt; wmic logicaldisk get caption<span class="token punctuation">,</span>description<span class="token punctuation">,</span>providername
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="el-h6 heading-wrapper"><h6 data-heading="Users Enumeration" dir="auto" class="heading" id="Users_Enumeration"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Users Enumeration</h6><div class="heading-children"><div class="el-p"><p dir="auto">Algo totalmente fundamental tras comprometer un sistema, es entender quiénes son los usuarios presentes para comprender el alcance de las cuentas y posibles puntos de entrada. La enumeración de usuarios implica identificar cuentas activas, privilegios asociados y posibles vulnerabilidades relacionadas con la gestión de usuarios. Herramientas como <code>net user</code> o <code>whoami</code> pueden proporcionar detalles sobre los usuarios locales y sus atributos. </p></div><div class="el-pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded"><span class="token comment"># Verify who user we are</span>
&gt; whoami
<span class="token comment"># List privileges</span>
&gt; whoami <span class="token operator">/</span>priv
<span class="token comment"># List groups information</span>
&gt; whoami <span class="token operator">/</span>groups
<span class="token comment"># Get all users on the machine</span>
&gt; net user 
<span class="token comment"># Get information about specific user</span>
&gt; net user <span class="token punctuation">{</span>username<span class="token punctuation">}</span>
<span class="token comment"># Try to get local groups information</span>
&gt; net localgroup 
<span class="token comment"># Get members about a group</span>
&gt; net localgroup <span class="token punctuation">{</span>group_name<span class="token punctuation">}</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="el-h6 heading-wrapper"><h6 data-heading="Network Enumeration" dir="auto" class="heading" id="Network_Enumeration"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Network Enumeration</h6><div class="heading-children"><div class="el-p"><p dir="auto">La infraestructura de red ofrece un panorama más amplio y potencialmente revelador del entorno en el que se encuentra el sistema comprometido. La enumeración de red implica identificar hosts activos, servicios expuestos, topología de red y relaciones entre dispostivios. herramientas como <code>ipconfig</code>, <code>netstat</code> y <code>nmap</code> so ncomunes para revelar direcciones IP, puertos abiertos y  conexiones activas, proporcionando información valiosa para mapear la superficie de ataque y encontras posibles vectores de escalada de privilegios.</p></div><div class="el-pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded"><span class="token comment"># See information about arquitecture of the network</span>
&gt; ipconfig
&gt; ipconfig <span class="token operator">/</span>all
<span class="token comment"># Look arp tables</span>
&gt; arp <span class="token operator">-</span>a 
<span class="token comment"># Print the routing table</span>
&gt; route print
<span class="token comment"># Print open ports in the system</span>
&gt; netstat <span class="token operator">-</span>ano
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="el-h6 heading-wrapper"><h6 data-heading="Password Hunting" dir="auto" class="heading" id="Password_Hunting"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Password Hunting</h6><div class="heading-children"><div class="el-p"><p dir="auto">Las contraseñas débiles o mal gestionadas puede representar una vulnerabilidad significativa en cualquier sistema. La búsqueda de contraseñas implica la identificación y explotación de debilidades en las políticas de seguridad de contraseñas, archivos de configuración, almacenamiento de contraseñas y prácticas de usuario. Herramientas como <code>pwdump</code> o <code>mimikatz</code> pueden extraer contraseñas almacenadas en el sistema, mientras que técnicas como el atque de diccionario o la fuerza bruta se tuiliza para descirfrar contraseñas débiles. La búsqueda de contraseñas es fundamental para aprovechar credenciales comprometidas y avanzar en los viles de privilegio dentro del sistema comprometido.</p></div><div class="el-pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded"><span class="token comment"># Find recursive and insensitive mode the word "password" in txt, conf and xml file in owenp user desktop</span>
&gt; findstr <span class="token operator">/</span><span class="token function">si</span> <span class="token string">'password'</span> <span class="token operator">*</span><span class="token punctuation">.</span>txt <span class="token operator">*</span><span class="token punctuation">.</span>conf <span class="token operator">*</span><span class="token punctuation">.</span>xml C:\Users\owenp\Desktop
<span class="token comment"># Find an SSID</span>
&gt; netsh wlan show profile
<span class="token comment"># Try to get Wi-Fi clear text password </span>
&gt; netsh wlan show profile <span class="token string">"{ssid}"</span> key=clear
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="el-h6 heading-wrapper"><h6 data-heading="Firewalls and Antivirus" dir="auto" class="heading" id="Firewalls_and_Antivirus"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Firewalls and Antivirus</h6><div class="heading-children"><div class="el-p"><p dir="auto">La presencia de firewalls en un sistema puede influir significativamente en la efectividad de los ataques y la escalada de privilegios .La enumeración de firewalls implica idetnficar las reglas de filtrado de paquetes, puertos bloqueados y políticas de seguridad aplicadas a nivel de red, herramientas como <code>netsh advfirewall</code> o, aunque deprecada, <code>netsh firewall</code> pueden revelar la configuración del firewall.<br>
Por otro lado, la presencia de software de antivirus puede representar otro obstáculo significativo para nosotros los pentesters o los ciberdelincuentes. La enumeración de antivirus implica idetnficar la presencia de software de seguridad, versiones, firmas de virus y configuraciones de detección. Herramientas como <code>wmic product get</code> en Windows pueden revelar la existencia de estos. Además , la exploración proactiva de políticas de escaneo, exclusiones de archvios y comportamientos del software antivirus puede proporcionar información curcial sobre cómo evadir la detección y persistir en el sistema comprometido.</p></div><div class="el-pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded"><span class="token comment"># List information about Windows Defender</span>
&gt; <span class="token function">sc</span> query windefend
<span class="token comment"># Find all services running (For another AVs)</span>
&gt; <span class="token function">sc</span> queryex <span class="token function">type</span>= service
<span class="token comment"># Try to dump firewall configurations</span>
&gt; netsh advfirewall firewall dump
<span class="token comment"># Older command to list firewall status</span>
&gt; netsh firewall show state 
<span class="token comment"># Show firewall configuration</span>
&gt; netsh firewall show config
</code><button class="copy-code-button">Copy</button></pre></div><div class="el-p"><p dir="auto">Recurso: <a data-tooltip-position="top" aria-label="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md" rel="noopener nofollow" class="external-link" href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md" target="_blank">PayloadAllTheThings</a><br>
Recurso: <a data-tooltip-position="top" aria-label="https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_windows.html" rel="noopener nofollow" class="external-link" href="https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_windows.html" target="_blank">TotalOSCPGuide</a><br>
Recurso: <a data-tooltip-position="top" aria-label="" rel="noopener nofollow" class="external-link" href="" target="_blank">Windows Privesc Checklist</a></p></div><div class="el-hr"><hr></div></div></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="Automated Tools" dir="auto" class="heading" id="Automated_Tools">Automated Tools</h1><div class="heading-children"><div class="el-h6 heading-wrapper"><h6 data-heading="Executables" dir="auto" class="heading" id="Executables"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Executables</h6><div class="heading-children"><div class="el-ul"><ul>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/peass-ng/PEASS-ng/tree/master/winPEAS" rel="noopener nofollow" class="external-link" href="https://github.com/peass-ng/PEASS-ng/tree/master/winPEAS" target="_blank">winPEAS.exe</a></li>
<li data-line="1" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/GhostPack/Seatbelt" rel="noopener nofollow" class="external-link" href="https://github.com/GhostPack/Seatbelt" target="_blank">Seatbelt.exe (Compile)</a></li>
<li data-line="2" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/rasta-mouse/Watson" rel="noopener nofollow" class="external-link" href="https://github.com/rasta-mouse/Watson" target="_blank">Watson.exe (Compile)</a></li>
<li data-line="3" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/GhostPack/SharpUp" rel="noopener nofollow" class="external-link" href="https://github.com/GhostPack/SharpUp" target="_blank">SharpUp.exe (Compile)</a></li>
</ul></div></div></div><div class="el-h6 heading-wrapper"><h6 data-heading="PowerShell" dir="auto" class="heading" id="PowerShell"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>PowerShell</h6><div class="heading-children"><div class="el-ul"><ul>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/rasta-mouse/Sherlock" rel="noopener nofollow" class="external-link" href="https://github.com/rasta-mouse/Sherlock" target="_blank">Sharlock.ps1</a></li>
<li data-line="1" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/PowerShellMafia/PowerSploit/tree/master/Privesc" rel="noopener nofollow" class="external-link" href="https://github.com/PowerShellMafia/PowerSploit/tree/master/Privesc" target="_blank">PowerUp.ps1</a></li>
<li data-line="2" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/411Hall/JAWS" rel="noopener nofollow" class="external-link" href="https://github.com/411Hall/JAWS" target="_blank">jaws-enum.ps1</a></li>
</ul></div></div></div><div class="el-h6 heading-wrapper"><h6 data-heading="Other" dir="auto" class="heading" id="Other"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Other</h6><div class="heading-children"><div class="el-ul"><ul>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/AonCyberLabs/Windows-Exploit-Suggester" rel="noopener nofollow" class="external-link" href="https://github.com/AonCyberLabs/Windows-Exploit-Suggester" target="_blank">windows-exploit-suggester.py (local)</a></li>
<li data-line="1" dir="auto"><a data-tooltip-position="top" aria-label="https://www.rapid7.com/blog/post/2015/08/11/metasploit-local-exploit-suggester-do-less-get-more/" rel="noopener nofollow" class="external-link" href="https://www.rapid7.com/blog/post/2015/08/11/metasploit-local-exploit-suggester-do-less-get-more/" target="_blank">Exploit Suggester (Metasploit)</a></li>
</ul></div><div class="el-p"><p dir="auto">Tanto los ejecutables como los scripts en powershell son herramientas que nos automatizan una gran parte de la detección de posibles vulnerabilidades, estos ejecutables y scripts se corren en la máquina víctima y obtendremos un output el cual podremos analizar con mayor cuidado. Pero también existen otras alternativas, como por ejemplo el uso de herramientas como <a data-tooltip-position="top" aria-label="https://github.com/AonCyberLabs/Windows-Exploit-Suggester" rel="noopener nofollow" class="external-link" href="https://github.com/AonCyberLabs/Windows-Exploit-Suggester" target="_blank">Windows Exploit Suggester</a> el cual es un script en Python que corremos de manera local que hace uso de una base de datos de vulnerabilidades y lee un archivo .txt el cual debería tener el contenido del output del comando <code>systeminfo</code>. </p></div><div class="el-p"><p dir="auto">Por lo que en la máquina víctima ejecutamos el comando <code>systeminfo</code>, capturamos el output y lo guardamos en un archivo en nuestra máquina de atacante local y posteriormente instalamos las dependencias necesarias, ejectuamos los comandos adjuntados en la guía de uso de Windows Exploit Suggester y obtendríamos posibles vulnerabilidades a revisar y explotar.</p></div><div class="el-pre"><pre class="language-bash" tabindex="0"><code data-line="0" class="language-bash is-loaded"><span class="token comment"># Clone the Windows Exploit Suggester tool</span>
<span class="token function">git</span> clone https://github.com/AonCyberLabs/Windows-Exploit-Suggester -l windowsSuggester
<span class="token comment"># Install or Upgrade if is possible the dependencie xlrd</span>
pip3 <span class="token function">install</span> xlrd --upgrade
<span class="token comment"># Update the database .xlsx file </span>
python2 windowsSuggester/windows-exploit-suggester.py --update
<span class="token comment"># Try to found vulnerabilities</span>
python2 windowsSuggester/windows-exploit-suggester.py --database <span class="token punctuation">{</span>database.xlsx<span class="token punctuation">}</span> --systeminfo <span class="token punctuation">{</span>path/to/file.txt/with/systeminfo/output<span class="token punctuation">}</span>
</code><button class="copy-code-button">Copy</button></pre></div><div class="mod-footer mod-ui"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Privilege Scalation"><div class="tree-item-contents heading-link" heading-name="Privilege Scalation"><span class="tree-item-title">Privilege Scalation</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Basic_System_enumeration"><div class="tree-item-contents heading-link" heading-name="Basic System enumeration"><span class="tree-item-title">Basic System enumeration</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#System_Enumeration"><div class="tree-item-contents heading-link" heading-name="System Enumeration"><span class="tree-item-title">System Enumeration</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Users_Enumeration"><div class="tree-item-contents heading-link" heading-name="Users Enumeration"><span class="tree-item-title">Users Enumeration</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Network_Enumeration"><div class="tree-item-contents heading-link" heading-name="Network Enumeration"><span class="tree-item-title">Network Enumeration</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Password_Hunting"><div class="tree-item-contents heading-link" heading-name="Password Hunting"><span class="tree-item-title">Password Hunting</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Firewalls_and_Antivirus"><div class="tree-item-contents heading-link" heading-name="Firewalls and Antivirus"><span class="tree-item-title">Firewalls and Antivirus</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Automated_Tools"><div class="tree-item-contents heading-link" heading-name="Automated Tools"><span class="tree-item-title">Automated Tools</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Executables"><div class="tree-item-contents heading-link" heading-name="Executables"><span class="tree-item-title">Executables</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#PowerShell"><div class="tree-item-contents heading-link" heading-name="PowerShell"><span class="tree-item-title">PowerShell</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="6"><a class="tree-link" href="notes\4.-cybersecurity\redteam\pentesting\systems\2.-audit-phases\3.-privilege-scalation\windows\0.-enumerating-possible-privesc.html#Other"><div class="tree-item-contents heading-link" heading-name="Other"><span class="tree-item-title">Other</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>